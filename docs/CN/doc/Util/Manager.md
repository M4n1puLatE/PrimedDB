# Manager
> PrimedDB中用于创建会以独立线程形式长期驻留并提供系统服务（如错误处理，日志信息打印输出等）的管理者类型的基类。

所属命名空间： `Util`

Manager的子类只需要对自己的成员保证线程安全。并最好在使用容器的情况下在注册的服务中加锁。

# 类型原理
1. 在`Manager`类型中有一个`static`的管理线程。该线程由多个管理者服务共用，线程通过待执行任务队列在不同子类提交的任务间进行上下文切换。这种设计是为了确保线程的利用率最大化，不会存在部分管理类型没有任务执行但还需要占用一个线程，且在唤醒和沉睡时浪费CPU。
2. `Manager`中会使用变长数组存储子类注册到基类的服务
3. 在子类提交任务并唤醒管理线程后，管理线程会执行所有子类提交的任务，直到待执行任务队列为空。
4. 待执行队列为子类注册新服务时获取的id，也即注册服务时变长数组`end`位置的下标。
5. **服务**只能注册，**不能被撤销**，因为这些服务应当被设计为持续服务系统组件直到系统关闭的。